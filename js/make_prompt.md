### 목표
웹페이지에서 실행 가능한 북마크릿(또는 콘솔에 붙여넣어 실행 가능한 스크립트)을 생성하도록 AI에게 지시하는 상세 프롬프트를 작성합니다. 생성 대상 스크립트는 iframe 기반의 독립 UI(부트스트랩 사용)를 띄우고, 원격의 데코레이터 텍스트 파일을 한 번만 가져와 캐시 후 파싱·관리하는 도구(decorators_helper)를 구현해야 합니다. 각 버튼 클릭 시 모달 안내가 먼저 뜨고, 확인 시 동작하도록 합니다. 코드 는 멀티라인으로 이해하기 쉽게 주석 포함해 생성해야 합니다.

---

### 프롬프트 (AI에게 그대로 전달할 내용 — 한국어)
아래 내용을 AI(코드 생성기)에 그대로 전달하세요.

"당신은 프론트엔드 자바스크립트 개발자입니다. 다음 요구사항을 충족하는 멀티라인 자바스크립트 코드를 생성해 주세요. 이 코드는 브라우저 콘솔에 붙여넣거나 즐겨찾기 북마크의 URL로 넣어 실행할 수 있어야 합니다. 생성 결과는 실행 가능한 완성 코드여야 하고, 코드 내부에 충분한 주석이 포함되어 있어야 합니다.

1) 기본 동작
- 페이지 우측 하단에 고정되는 iframe을 생성한다. iframe의 id는 'decorators_helper_iframe_v2'로 설정한다.
- iframe 내부는 독립된 문서이며 외부 페이지의 CSP 영향 없이 Bootstrap CSS/JS를 로드해도 된다 (Bootstrap CDN 사용).
- iframe의 크기와 스타일은 사용자 화면에 잘 맞도록 적당히 설정(너비 약 420px, 높이 약 500px 권장)하고, 닫기 버튼으로 부모 문서에서 iframe을 제거할 수 있어야 한다.

2) 원본 데이터 로드 및 캐시
- 원본 텍스트 파일 URL은 'https://raw.githubusercontent.com/TaewonyNet/prompt-decorators-kor/refs/heads/main/prompt-decorators-kor.txt'이다.
- 파일은 최초 한 번만 fetch하고, 이후에는 메모리 캐시(cachedDecorators)를 사용한다.
- fetch 실패 시 최소한 하나의 기본 데코레이터(예: '+++추론')를 폴백으로 제공한다.

3) 파싱 규칙
- 파일 내 데코레이터 블록의 형식 예시는:
  #### `+++이름(파라미터)`
  설명...
  ---
- 데코레이터 이름은 백틱(`) 내부 전체를 취하도록 정규식을 작성한다. (예: /####\s*`(\+\+\+[^`]+)`\s*([\s\S]*?)(?=\n---|\n####|$)/g)
- 파싱 결과는 배열 형태로 { cmd: '+++...', desc: '설명 텍스트(줄바꿈 제거)' }를 반환해야 한다.

4) UI 구조 (iframe 내부)
- 상단: 제목(아이콘 포함) + 다크모드 토글 버튼(🌙/☀️) + 도움말 버튼(❓) + 닫기(✕)
- 본문: multi-line textarea(프롬프트 입력) + ➕ 데코레이터 추가 버튼
- 하단: 3개의 아이콘 버튼 — 프롬프트 초기화(🗑️), 데코레이터 초기화(📋), 데코레이터 유지(🔒)
- 데코레이터 추가 버튼을 누르면, 페이지 내부에 Bootstrap 스타일의 리스트 그룹(또는 컨텍스트 메뉴)을 표시한다. 메뉴 항목은 파싱된 데코레이터 목록(보여줄 때는 '+++ 제거한 이름')으로 구성한다.
- 메뉴에서 항목 클릭 시 해당 cmd가 항상 textarea의 맨 위(상단)에 삽입된다. 기존 텍스트와 중복되는 cmd가 있으면 삽입하지 않는다.
- 메뉴는 외부 클릭 시 닫힌다.

5) 버튼 동작 및 모달 안내
- 모든 주요 버튼(데코레이터 초기화, 프롬프트 초기화, 데코레이터 유지, 도움말, 다크모드 토글 포함) 클릭 시 먼저 Bootstrap 모달로 상세 설명을 보여준다. 모달의 확인(확인/닫기) 버튼을 누르면 실제 동작을 수행하도록 구현한다.
  - 데코레이터 초기화(📋): 원문을 fetch하여 클립보드에 복사하고, 모달에 "원문을 클립보드로 복사했습니다. 최초 실행 시 AI 프롬프트에 붙여넣고 실행하세요." 같은 안내를 보여준다.
  - 프롬프트 초기화(🗑️): 모달에서 "입력창의 모든 내용을 지웁니다. 되돌릴 수 없습니다." 안내 후 확인 시 textarea를 빈 문자열로 만든다.
  - 데코레이터 유지(🔒): 모달에서 "+++로 시작하는 줄만 남깁니다." 안내 후 확인 시 textarea에 +++로 시작하는 줄만 남기도록 처리한다.
  - 도움말(❓): 사용 방법을 상세히 설명하는 모달을 띄운다.
  - 다크모드(🌙): 모달 안내는 필요 없지만, 상태 반영(본문 배경/입력 색상 변화)과 토글 텍스트 변경을 구현한다.
- 모달은 Bootstrap의 모달 컴포넌트를 사용하고, iframe 내부에서 동작해야 한다.

6) 스타일 및 접근성
- Bootstrap을 사용하되, iframe 내부에 추가적인 커스텀 CSS(다크모드 관련 등)를 포함한다.
- 버튼에 title 혹은 aria-label을 넣어 툴팁/접근성을 고려한다.
- 모바일 화면에서 잘 보이도록 너비가 화면을 넘지 않게 max-width 처리.

7) 코드 품질
- 생성되는 코드는 멀티라인 형태로 읽기 쉽고, 각 주요 섹션(iframe 생성, HTML 문자열, 이벤트 바인딩, fetch/파싱 함수, 유틸 함수 등)에 주석을 충분히 달아라.
- 전역 네임스페이스 오염을 피하기 위해 부모 페이지에서는 최소한의 전역만 사용(iframe id 외에는 사용하지 않도록).
- 예외 처리(try/catch)를 사용해 네트워크 실패나 clipboard 쓰기 오류 등을 콘솔에 로깅하고, 사용자에게 모달로 오류 안내를 보여줘라.
- 생성된 코드를 그대로 붙여넣으면 동작해야 한다(추가 빌드나 패키지 설치 불필요).

8) 출력물
- 응답은 오직 생성할 자바스크립트 코드(멀티라인)로만 제공하라. (설명이나 추가 텍스트는 제외)
- 코드 상단에 기능 요약 주석 블록을 포함하라(짧게 핵심 기능 나열).

이 요구사항을 모두 충족하는 자바스크립트 코드를 멀티라인으로 출력해 주세요."

---

### 추가 팁 (선택적, AI에게 더 명확히 하고 싶을 때)
- "모달은 사용자가 확인 버튼을 눌렀을 때만 실제 동작을 수행"이라고 강조하세요.
- "fetch 시 cache: 'no-store' 옵션을 사용"을 명시하면 최신 파일을 강제 로드합니다.
- "파싱 실패시 콘솔에 원본 텍스트를 출력"하면 디버깅이 쉬워집니다.

---

이 프롬프트를 AI에게 그대로 제공하면, 요청하신 iframe 기반 decorators_helper 스크립트를 멀티라인으로, 주석과 모달 안내를 포함해 생성할 가능성이 높습니다. 필요하면 영어 버전으로 번역해 드리겠습니다.